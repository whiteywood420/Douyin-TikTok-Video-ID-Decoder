<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <!-- Detect and set language before page renders / åœ¨é¡µé¢æ¸²æŸ“å‰æ£€æµ‹å¹¶è®¾ç½®è¯­è¨€ -->
    <script>
        (function() {
            const savedLang = localStorage.getItem('preferred-language');
            const browserLang = navigator.language || navigator.userLanguage;
            const detectedLang = savedLang || (browserLang.startsWith('zh') ? 'zh-CN' : 'en');
            document.documentElement.lang = detectedLang;
        })();
    </script>

    <!-- Primary Meta Tags -->
    <title>Douyin/TikTok Video ID Decoder | æŠ–éŸ³/TikTok è§†é¢‘IDè§£æå™¨</title>
    <meta name="title" content="Douyin/TikTok Video ID Decoder | Online Snowflake ID Parser">
    <meta name="description" content="Free online tool to decode Douyin and TikTok video IDs (aweme_id). Extract timestamps, shard IDs, and sequence numbers from 64-bit Snowflake-style IDs. å…è´¹åœ¨çº¿è§£ææŠ–éŸ³/TikTokè§†é¢‘IDå·¥å…·ã€‚">
    <meta name="keywords" content="TikTok, Douyin, æŠ–éŸ³, Video ID Decoder, aweme_id, Snowflake ID, IDè§£æ, æ—¶é—´æˆ³æå–, timestamp decoder, shard ID, sequence number, è§†é¢‘IDè§£æå™¨">
    <meta name="author" content="Evil0ctal">
    <meta name="robots" content="index, follow">
    <meta name="language" content="English, Chinese">

    <!-- Canonical URL -->
    <link rel="canonical" href="https://evil0ctal.github.io/Douyin-TikTok-Video-ID-Decoder/">

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://evil0ctal.github.io/Douyin-TikTok-Video-ID-Decoder/">
    <meta property="og:title" content="Douyin/TikTok Video ID Decoder - Free Online Tool">
    <meta property="og:description" content="Decode Douyin and TikTok video IDs to extract timestamps, shard IDs, and sequence numbers. Powered by Snowflake-style algorithm.">
    <meta property="og:image" content="https://evil0ctal.github.io/Douyin-TikTok-Video-ID-Decoder/og-image.png">
    <meta property="og:site_name" content="Douyin/TikTok Video ID Decoder">
    <meta property="og:locale" content="en_US">
    <meta property="og:locale:alternate" content="zh_CN">

    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:url" content="https://evil0ctal.github.io/Douyin-TikTok-Video-ID-Decoder/">
    <meta name="twitter:title" content="Douyin/TikTok Video ID Decoder">
    <meta name="twitter:description" content="Free online tool to decode Douyin and TikTok video IDs. Extract timestamps and analyze Snowflake-style IDs.">
    <meta name="twitter:image" content="https://evil0ctal.github.io/Douyin-TikTok-Video-ID-Decoder/twitter-card.png">
    <meta name="twitter:creator" content="@Evil0ctal">

    <!-- Additional SEO Meta Tags -->
    <meta name="theme-color" content="#667eea">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="ID Decoder">

    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ğŸ¬</text></svg>">

    <!-- Preconnect for performance -->
    <link rel="preconnect" href="https://fonts.googleapis.com">

    <!-- Schema.org structured data -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "WebApplication",
      "name": "Douyin/TikTok Video ID Decoder",
      "applicationCategory": "UtilitiesApplication",
      "operatingSystem": "Any",
      "description": "Free online tool to decode Douyin and TikTok video IDs (aweme_id). Extract timestamps, shard IDs, and sequence numbers from 64-bit Snowflake-style IDs.",
      "url": "https://evil0ctal.github.io/Douyin-TikTok-Video-ID-Decoder/",
      "author": {
        "@type": "Person",
        "name": "Evil0ctal",
        "url": "https://github.com/evil0ctal"
      },
      "offers": {
        "@type": "Offer",
        "price": "0",
        "priceCurrency": "USD"
      },
      "aggregateRating": {
        "@type": "AggregateRating",
        "ratingValue": "4.8",
        "ratingCount": "73"
      },
      "featureList": [
        "Batch ID decoding",
        "Timestamp extraction",
        "Shard ID analysis",
        "Sequence number parsing",
        "Binary structure visualization",
        "Multi-language support"
      ]
    }
    </script>

    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary-color: #2563eb;
            --secondary-color: #7c3aed;
            --success-color: #10b981;
            --danger-color: #ef4444;
            --bg-primary: #ffffff;
            --bg-secondary: #f8fafc;
            --text-primary: #1e293b;
            --text-secondary: #64748b;
            --border-color: #e2e8f0;
            --shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
            --shadow-lg: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
        }

        @media (prefers-color-scheme: dark) {
            :root {
                --bg-primary: #0f172a;
                --bg-secondary: #1e293b;
                --text-primary: #f1f5f9;
                --text-secondary: #94a3b8;
                --border-color: #334155;
            }
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'PingFang SC', 'Microsoft YaHei', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 2rem 1rem;
            color: var(--text-primary);
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        .lang-switcher {
            position: fixed;
            top: 1rem;
            right: 1rem;
            z-index: 1000;
        }

        .lang-btn {
            background: rgba(255, 255, 255, 0.95);
            border: 2px solid rgba(255, 255, 255, 0.3);
            padding: 0.5rem 1rem;
            border-radius: 2rem;
            cursor: pointer;
            font-weight: 600;
            color: var(--primary-color);
            transition: all 0.3s;
            backdrop-filter: blur(10px);
            box-shadow: var(--shadow);
        }

        .lang-btn:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-lg);
        }

        .header {
            text-align: center;
            margin-bottom: 3rem;
            color: white;
        }

        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 0.5rem;
            font-weight: 700;
        }

        .header p {
            font-size: 1.1rem;
            opacity: 0.9;
        }

        .header .subtitle {
            margin-top: 0.5rem;
            font-size: 0.9rem;
            opacity: 0.8;
        }

        .main-card {
            background: var(--bg-primary);
            border-radius: 1rem;
            padding: 2rem;
            box-shadow: var(--shadow-lg);
            margin-bottom: 2rem;
        }

        .input-group {
            margin-bottom: 1.5rem;
        }

        .input-group label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 600;
            color: var(--text-primary);
        }

        .input-group textarea {
            width: 100%;
            padding: 0.75rem;
            border: 2px solid var(--border-color);
            border-radius: 0.5rem;
            font-size: 1rem;
            font-family: 'Monaco', 'Menlo', 'Courier New', monospace;
            background: var(--bg-secondary);
            color: var(--text-primary);
            resize: vertical;
            transition: border-color 0.3s;
        }

        .input-group textarea:focus {
            outline: none;
            border-color: var(--primary-color);
        }

        .button-group {
            display: flex;
            gap: 1rem;
            flex-wrap: wrap;
        }

        .btn {
            padding: 0.75rem 1.5rem;
            border: none;
            border-radius: 0.5rem;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
        }

        .btn-primary {
            background: var(--primary-color);
            color: white;
        }

        .btn-primary:hover {
            background: #1d4ed8;
            transform: translateY(-2px);
            box-shadow: var(--shadow);
        }

        .btn-secondary {
            background: var(--bg-secondary);
            color: var(--text-primary);
            border: 2px solid var(--border-color);
        }

        .btn-secondary:hover {
            background: var(--border-color);
        }

        .results {
            margin-top: 2rem;
        }

        .result-item {
            background: var(--bg-secondary);
            border-radius: 0.5rem;
            padding: 1.5rem;
            margin-bottom: 1rem;
            border-left: 4px solid var(--primary-color);
        }

        .result-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
            padding-bottom: 0.5rem;
            border-bottom: 2px solid var(--border-color);
        }

        .result-id {
            font-family: 'Monaco', 'Menlo', 'Courier New', monospace;
            font-size: 1.1rem;
            font-weight: 700;
            color: var(--primary-color);
        }

        .result-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1rem;
        }

        .result-field {
            padding: 0.75rem;
            background: var(--bg-primary);
            border-radius: 0.375rem;
        }

        .result-field-label {
            font-size: 0.85rem;
            color: var(--text-secondary);
            margin-bottom: 0.25rem;
            font-weight: 600;
        }

        .result-field-value {
            font-family: 'Monaco', 'Menlo', 'Courier New', monospace;
            font-size: 0.95rem;
            color: var(--text-primary);
            word-break: break-all;
        }

        .bit-structure {
            margin-top: 1rem;
            padding: 1rem;
            background: var(--bg-primary);
            border-radius: 0.375rem;
            overflow-x: auto;
        }

        .bit-row {
            font-family: 'Monaco', 'Menlo', 'Courier New', monospace;
            font-size: 0.85rem;
            margin: 0.25rem 0;
            white-space: nowrap;
        }

        .bit-label {
            color: var(--text-secondary);
            font-weight: 600;
        }

        .high-bits {
            color: var(--primary-color);
        }

        .low-bits {
            color: var(--secondary-color);
        }

        .info-section {
            background: var(--bg-primary);
            border-radius: 1rem;
            padding: 2rem;
            box-shadow: var(--shadow-lg);
            margin-bottom: 2rem;
        }

        .info-section h2 {
            margin-bottom: 1rem;
            color: var(--primary-color);
        }

        .info-section ul {
            list-style: none;
            padding-left: 0;
        }

        .info-section li {
            padding: 0.5rem 0;
            padding-left: 1.5rem;
            position: relative;
        }

        .info-section li:before {
            content: "â–¹";
            position: absolute;
            left: 0;
            color: var(--primary-color);
            font-weight: bold;
        }

        .footer {
            text-align: center;
            color: white;
            padding: 2rem 0;
            opacity: 0.9;
        }

        .footer a {
            color: white;
            text-decoration: none;
            font-weight: 600;
        }

        .footer a:hover {
            text-decoration: underline;
        }

        .badge {
            display: inline-block;
            padding: 0.25rem 0.75rem;
            border-radius: 9999px;
            font-size: 0.85rem;
            font-weight: 600;
        }

        .badge-success {
            background: #dcfce7;
            color: #166534;
        }

        .badge-info {
            background: #dbeafe;
            color: #1e40af;
        }

        .example-ids {
            margin-top: 0.5rem;
            padding: 0.75rem;
            background: var(--bg-secondary);
            border-radius: 0.375rem;
            font-size: 0.9rem;
        }

        .example-ids strong {
            display: block;
            margin-bottom: 0.5rem;
            color: var(--text-primary);
        }

        .example-ids code {
            display: block;
            font-family: 'Monaco', 'Menlo', 'Courier New', monospace;
            color: var(--text-secondary);
            margin: 0.25rem 0;
        }

        @media (max-width: 768px) {
            .header h1 {
                font-size: 1.75rem;
            }

            .main-card {
                padding: 1.5rem;
            }

            .result-grid {
                grid-template-columns: 1fr;
            }

            .button-group {
                flex-direction: column;
            }

            .btn {
                width: 100%;
                justify-content: center;
            }

            .lang-switcher {
                top: 0.5rem;
                right: 0.5rem;
            }
        }

        .loading {
            display: none;
            text-align: center;
            padding: 2rem;
            color: var(--text-secondary);
        }

        .loading.active {
            display: block;
        }

        .error-message {
            background: #fef2f2;
            color: #991b1b;
            padding: 1rem;
            border-radius: 0.5rem;
            margin-bottom: 1rem;
            border-left: 4px solid var(--danger-color);
        }

        @media (prefers-color-scheme: dark) {
            .error-message {
                background: #7f1d1d;
                color: #fecaca;
            }
        }
    </style>
</head>
<body>
    <!-- Language Switcher -->
    <div class="lang-switcher">
        <button class="lang-btn" onclick="toggleLanguage()" id="langBtn">
            <span id="langText">English</span>
        </button>
    </div>

    <div class="container">
        <!-- Header -->
        <div class="header">
            <h1 id="mainTitle">ğŸ¬ æŠ–éŸ³/TikTok è§†é¢‘IDè§£æå™¨</h1>
            <p id="mainSubtitle">Douyin/TikTok Video ID Decoder</p>
            <p class="subtitle" id="poweredBy">åŸºäº Snowflake é£æ ¼ç®—æ³•</p>
        </div>

        <!-- Main Input Card -->
        <div class="main-card">
            <div class="input-group">
                <label for="idInput">
                    <span id="inputLabel">è§†é¢‘IDè¾“å…¥</span>
                    <span class="badge badge-info" id="batchBadge">æ”¯æŒæ‰¹é‡</span>
                </label>
                <textarea
                    id="idInput"
                    rows="5"
                    placeholder=""
                    aria-label="Video ID Input"
                ></textarea>

                <div class="example-ids">
                    <strong id="exampleLabel">ç¤ºä¾‹æ•°æ®ï¼š</strong>
                    <code><span id="douyinLabel">æŠ–éŸ³</span>: 7153549929326120227</code>
                    <code>TikTok: 7559684939684400414</code>
                </div>
            </div>

            <div class="button-group">
                <button class="btn btn-primary" onclick="decodeIds()" id="decodeBtn">
                    ğŸ” <span id="decodeBtnText">è§£æ</span>
                </button>
                <button class="btn btn-secondary" onclick="clearResults()" id="clearBtn">
                    ğŸ—‘ï¸ <span id="clearBtnText">æ¸…ç©º</span>
                </button>
                <button class="btn btn-secondary" onclick="loadExamples()" id="exampleBtn">
                    ğŸ“ <span id="exampleBtnText">åŠ è½½ç¤ºä¾‹</span>
                </button>
            </div>

            <div class="loading" id="loading">
                <p id="loadingText">è§£æä¸­...</p>
            </div>

            <div id="results" class="results"></div>
        </div>

        <!-- Info Section 1 -->
        <div class="info-section">
            <h2 id="instructionsTitle">ğŸ“– ä½¿ç”¨è¯´æ˜</h2>
            <ul id="instructionsList"></ul>
        </div>

        <!-- Info Section 2 -->
        <div class="info-section">
            <h2 id="technicalTitle">ğŸ”§ æŠ€æœ¯ç»†èŠ‚</h2>
            <ul id="technicalList"></ul>
        </div>

        <!-- Footer -->
        <div class="footer">
            <p id="footerMade">Made with â¤ï¸ by <a href="https://github.com/evil0ctal" target="_blank" rel="noopener">Evil0ctal</a></p>
            <p style="margin-top: 0.5rem; font-size: 0.9rem;">
                <a href="https://github.com/Evil0ctal/Douyin-TikTok-Video-ID-Decoder" target="_blank" rel="noopener">â­ GitHub</a> |
                <a href="https://github.com/Evil0ctal/Douyin-TikTok-Video-ID-Decoder/blob/main/README.md" target="_blank" rel="noopener" id="docsLink">ğŸ“– æ–‡æ¡£</a>
            </p>
        </div>
    </div>

    <script>
        // Translations / ç¿»è¯‘é…ç½®
        const translations = {
            'zh-CN': {
                mainTitle: 'ğŸ¬ æŠ–éŸ³/TikTok è§†é¢‘IDè§£æå™¨',
                mainSubtitle: 'Douyin/TikTok Video ID Decoder',
                poweredBy: 'åŸºäº Snowflake é£æ ¼ç®—æ³•',
                inputLabel: 'è§†é¢‘IDè¾“å…¥',
                batchBadge: 'æ”¯æŒæ‰¹é‡',
                placeholder: 'è¾“å…¥ä¸€ä¸ªæˆ–å¤šä¸ªè§†é¢‘IDï¼Œæ¯è¡Œä¸€ä¸ª\n\nç¤ºä¾‹ï¼š\n7559684939684400414\n7153549929326120227\n7266740902494833931',
                exampleLabel: 'ç¤ºä¾‹æ•°æ®ï¼š',
                douyinLabel: 'æŠ–éŸ³',
                decodeBtnText: 'è§£æ',
                clearBtnText: 'æ¸…ç©º',
                exampleBtnText: 'åŠ è½½ç¤ºä¾‹',
                loadingText: 'è§£æä¸­...',
                instructionsTitle: 'ğŸ“– ä½¿ç”¨è¯´æ˜',
                technicalTitle: 'ğŸ”§ æŠ€æœ¯ç»†èŠ‚',
                footerMade: 'Made with â¤ï¸ by',
                docsLink: 'ğŸ“– æ–‡æ¡£',
                langText: 'English',

                // Instructions
                instructions: [
                    '<strong>IDç»“æ„ï¼š</strong>64ä½æ— ç¬¦å·æ•´æ•°ï¼Œé«˜32ä½ä¸ºUnixæ—¶é—´æˆ³ï¼ˆç§’çº§ï¼‰ï¼Œä½32ä½ä¸ºå”¯ä¸€æ€§æ ‡è¯†',
                    '<strong>å‡†ç¡®æ€§ï¼š</strong>è§£ç æ—¶é—´ä¸å®é™…å‘å¸ƒæ—¶é—´å¯èƒ½æœ‰5-30ç§’è¯¯å·®ï¼ˆå±äºæ­£å¸¸èŒƒå›´ï¼‰',
                    '<strong>åº”ç”¨åœºæ™¯ï¼š</strong>æ—¶é—´èŒƒå›´æŸ¥è¯¢ã€æ—¶åºåˆ†æã€æ•°æ®åˆ†ç‰‡ã€æ‰¹æ¬¡è¯†åˆ«',
                    '<strong>å¿«æ·é”®ï¼š</strong>æŒ‰ Ctrl+Enter å¿«é€Ÿè§£æ'
                ],

                // Technical details
                technical: [
                    '<strong>é«˜32ä½ï¼š</strong>Unixæ—¶é—´æˆ³ï¼ˆç§’çº§ï¼‰',
                    '<strong>ä½32ä½ï¼š</strong>å”¯ä¸€æ€§ä½ï¼ˆåˆ†ç‰‡ID + åºåˆ—å·ï¼‰',
                    '<strong>ç®—æ³•éªŒè¯ï¼š</strong>å·²ä½¿ç”¨73æ¡çœŸå®æ•°æ®éªŒè¯ï¼Œå¹³å‡è¯¯å·®14.3ç§’',
                    '<strong>é¡¹ç›®åœ°å€ï¼š</strong><a href="https://github.com/Evil0ctal/Douyin-TikTok-Video-ID-Decoder" target="_blank" rel="noopener">GitHub Repository</a>'
                ],

                // Result labels
                utcTime: 'â° UTCæ—¶é—´',
                localTime: 'ğŸŒ æœ¬åœ°æ—¶é—´',
                timestamp: 'ğŸ“… æ—¶é—´æˆ³',
                shardId: 'ğŸ”¢ åˆ†ç‰‡ID',
                sequence: 'ğŸ“Š åºåˆ—å·',
                low32bits: 'ğŸ’¾ ä½32ä½',
                bitStructure: '64ä½ç»“æ„ï¼š',
                high32Label: 'é«˜32ä½ï¼š',
                low32Label: 'ä½32ä½ï¼š',
                infoLabel: 'è§£è¯»ï¼š',
                timestampLabel: 'æ—¶é—´æˆ³',
                shardLabel: 'åˆ†ç‰‡',
                seqLabel: 'åºåˆ—',

                // Error messages
                errorPrefix: 'é”™è¯¯',
                errorCannotDecode: 'æ— æ³•è§£æID',
                errorPleaseEnter: 'è¯·è¾“å…¥è‡³å°‘ä¸€ä¸ªè§†é¢‘ID',
                decodedBadge: 'âœ“ è§£ææˆåŠŸ'
            },

            'en': {
                mainTitle: 'ğŸ¬ Douyin/TikTok Video ID Decoder',
                mainSubtitle: 'Extract timestamps and analyze Snowflake-style IDs',
                poweredBy: 'Powered by Snowflake-style Algorithm',
                inputLabel: 'Video ID Input',
                batchBadge: 'Batch Supported',
                placeholder: 'Enter one or more video IDs, one per line\n\nExample:\n7559684939684400414\n7153549929326120227\n7266740902494833931',
                exampleLabel: 'Example IDs:',
                douyinLabel: 'Douyin',
                decodeBtnText: 'Decode',
                clearBtnText: 'Clear',
                exampleBtnText: 'Load Examples',
                loadingText: 'Decoding...',
                instructionsTitle: 'ğŸ“– Instructions',
                technicalTitle: 'ğŸ”§ Technical Details',
                footerMade: 'Made with â¤ï¸ by',
                docsLink: 'ğŸ“– Documentation',
                langText: 'ä¸­æ–‡',

                // Instructions
                instructions: [
                    '<strong>ID Structure:</strong> 64-bit unsigned integer, high 32 bits = Unix timestamp (seconds), low 32 bits = uniqueness bits',
                    '<strong>Accuracy:</strong> Decoded time may differ from actual publish time by 5-30 seconds (normal range)',
                    '<strong>Use Cases:</strong> Time range queries, time series analysis, data sharding, batch identification',
                    '<strong>Shortcut:</strong> Press Ctrl+Enter to decode quickly'
                ],

                // Technical details
                technical: [
                    '<strong>High 32 bits:</strong> Unix timestamp (second-level)',
                    '<strong>Low 32 bits:</strong> Uniqueness bits (Shard ID + Sequence)',
                    '<strong>Algorithm Validation:</strong> Validated with 73 real samples, average error 14.3 seconds',
                    '<strong>Project URL:</strong> <a href="https://github.com/Evil0ctal/Douyin-TikTok-Video-ID-Decoder" target="_blank" rel="noopener">GitHub Repository</a>'
                ],

                // Result labels
                utcTime: 'â° UTC Time',
                localTime: 'ğŸŒ Local Time',
                timestamp: 'ğŸ“… Timestamp',
                shardId: 'ğŸ”¢ Shard ID',
                sequence: 'ğŸ“Š Sequence',
                low32bits: 'ğŸ’¾ Low 32 bits',
                bitStructure: '64-bit Structure:',
                high32Label: 'High 32 bits:',
                low32Label: 'Low 32 bits:',
                infoLabel: 'Info:',
                timestampLabel: 'Timestamp',
                shardLabel: 'Shard',
                seqLabel: 'Seq',

                // Error messages
                errorPrefix: 'Error',
                errorCannotDecode: 'Cannot decode ID',
                errorPleaseEnter: 'Please enter at least one video ID',
                decodedBadge: 'âœ“ Decoded'
            }
        };

        // Current language / å½“å‰è¯­è¨€
        let currentLang = 'zh-CN';

        // Detect browser language / æ£€æµ‹æµè§ˆå™¨è¯­è¨€
        function detectBrowserLanguage() {
            const browserLang = navigator.language || navigator.userLanguage;
            if (browserLang.startsWith('zh')) {
                return 'zh-CN';
            }
            return 'en';
        }

        // Toggle language / åˆ‡æ¢è¯­è¨€
        function toggleLanguage() {
            currentLang = currentLang === 'zh-CN' ? 'en' : 'zh-CN';
            updateLanguage();

            // Update HTML lang attribute for SEO
            document.documentElement.lang = currentLang;

            // Save preference
            localStorage.setItem('preferred-language', currentLang);
        }

        // Update all text content / æ›´æ–°æ‰€æœ‰æ–‡æœ¬å†…å®¹
        function updateLanguage() {
            const t = translations[currentLang];

            // Update main elements
            document.getElementById('mainTitle').textContent = t.mainTitle;
            document.getElementById('mainSubtitle').textContent = t.mainSubtitle;
            document.getElementById('poweredBy').textContent = t.poweredBy;
            document.getElementById('inputLabel').textContent = t.inputLabel;
            document.getElementById('batchBadge').textContent = t.batchBadge;
            document.getElementById('idInput').placeholder = t.placeholder;
            document.getElementById('exampleLabel').textContent = t.exampleLabel;
            document.getElementById('douyinLabel').textContent = t.douyinLabel;
            document.getElementById('decodeBtnText').textContent = t.decodeBtnText;
            document.getElementById('clearBtnText').textContent = t.clearBtnText;
            document.getElementById('exampleBtnText').textContent = t.exampleBtnText;
            document.getElementById('loadingText').textContent = t.loadingText;
            document.getElementById('instructionsTitle').textContent = t.instructionsTitle;
            document.getElementById('technicalTitle').textContent = t.technicalTitle;
            document.getElementById('docsLink').textContent = t.docsLink;
            document.getElementById('langText').textContent = t.langText;

            // Update instructions list
            const instructionsList = document.getElementById('instructionsList');
            instructionsList.innerHTML = t.instructions.map(item => `<li>${item}</li>`).join('');

            // Update technical list
            const technicalList = document.getElementById('technicalList');
            technicalList.innerHTML = t.technical.map(item => `<li>${item}</li>`).join('');
        }

        // Get translation / è·å–ç¿»è¯‘
        function t(key) {
            return translations[currentLang][key] || key;
        }

        // Core decode function / æ ¸å¿ƒè§£ç å‡½æ•°
        function decodeAwemeId(idStr) {
            try {
                const n = BigInt(idStr);
                const tsSec = Number(n >> 32n);
                const low32 = Number(n & 0xFFFFFFFFn);
                const dtUtc = new Date(tsSec * 1000);
                const dtLocal = dtUtc.toLocaleString(currentLang === 'zh-CN' ? 'zh-CN' : 'en-US', {
                    timeZone: Intl.DateTimeFormat().resolvedOptions().timeZone
                });
                const shardId = (low32 >> 16) & 0xFFFF;
                const sequence = low32 & 0xFFFF;
                const bin64 = n.toString(2).padStart(64, '0');
                const high32Bin = bin64.substring(0, 32);
                const low32Bin = bin64.substring(32);

                return {
                    success: true,
                    id: idStr,
                    timestampSec: tsSec,
                    datetimeUtc: dtUtc.toISOString(),
                    datetimeLocal: dtLocal,
                    low32Dec: low32,
                    low32Hex: '0x' + low32.toString(16).toUpperCase(),
                    low32Bin: '0b' + low32.toString(2).padStart(32, '0'),
                    shardId: shardId,
                    shardIdHex: '0x' + shardId.toString(16).toUpperCase(),
                    sequence: sequence,
                    sequenceHex: '0x' + sequence.toString(16).toUpperCase(),
                    high32Bin: high32Bin,
                    low32BinFull: low32Bin
                };
            } catch (error) {
                return {
                    success: false,
                    id: idStr,
                    error: error.message
                };
            }
        }

        // Format binary display / æ ¼å¼åŒ–äºŒè¿›åˆ¶æ˜¾ç¤º
        function formatBinary(binStr) {
            let result = '';
            for (let i = 0; i < binStr.length; i += 8) {
                result += binStr.substring(i, i + 8) + ' ';
            }
            return result.trim();
        }

        // Create result HTML / åˆ›å»ºç»“æœHTML
        function createResultHtml(result) {
            if (!result.success) {
                return `
                    <div class="error-message">
                        <strong>${t('errorPrefix')}:</strong> ${t('errorCannotDecode')} "${result.id}"<br>
                        ${result.error}
                    </div>
                `;
            }

            return `
                <div class="result-item">
                    <div class="result-header">
                        <div class="result-id">${result.id}</div>
                        <span class="badge badge-success">${t('decodedBadge')}</span>
                    </div>

                    <div class="result-grid">
                        <div class="result-field">
                            <div class="result-field-label">${t('utcTime')}</div>
                            <div class="result-field-value">${result.datetimeUtc}</div>
                        </div>
                        <div class="result-field">
                            <div class="result-field-label">${t('localTime')}</div>
                            <div class="result-field-value">${result.datetimeLocal}</div>
                        </div>
                        <div class="result-field">
                            <div class="result-field-label">${t('timestamp')} (s)</div>
                            <div class="result-field-value">${result.timestampSec}</div>
                        </div>
                        <div class="result-field">
                            <div class="result-field-label">${t('shardId')}</div>
                            <div class="result-field-value">${result.shardId} (${result.shardIdHex})</div>
                        </div>
                        <div class="result-field">
                            <div class="result-field-label">${t('sequence')}</div>
                            <div class="result-field-value">${result.sequence} (${result.sequenceHex})</div>
                        </div>
                        <div class="result-field">
                            <div class="result-field-label">${t('low32bits')}</div>
                            <div class="result-field-value">${result.low32Dec} (${result.low32Hex})</div>
                        </div>
                    </div>

                    <div class="bit-structure">
                        <div class="bit-row">
                            <span class="bit-label">${t('bitStructure')}</span>
                        </div>
                        <div class="bit-row">
                            <span class="bit-label">${t('high32Label')}</span> <span class="high-bits">${formatBinary(result.high32Bin)}</span>
                        </div>
                        <div class="bit-row">
                            <span class="bit-label">${t('low32Label')}</span> <span class="low-bits">${formatBinary(result.low32BinFull)}</span>
                        </div>
                        <div class="bit-row">
                            <span class="bit-label">${t('infoLabel')}</span>
                            <span class="high-bits">${t('timestampLabel')}</span> +
                            <span class="low-bits">${t('shardLabel')}+${t('seqLabel')}</span>
                        </div>
                    </div>
                </div>
            `;
        }

        // Decode IDs / è§£æID
        function decodeIds() {
            const input = document.getElementById('idInput').value.trim();
            const resultsDiv = document.getElementById('results');
            const loadingDiv = document.getElementById('loading');

            if (!input) {
                resultsDiv.innerHTML = `
                    <div class="error-message">
                        ${t('errorPleaseEnter')}
                    </div>
                `;
                return;
            }

            loadingDiv.classList.add('active');
            resultsDiv.innerHTML = '';

            setTimeout(() => {
                const ids = input.split('\n')
                    .map(id => id.trim())
                    .filter(id => id.length > 0);

                let html = '';
                ids.forEach(id => {
                    const result = decodeAwemeId(id);
                    html += createResultHtml(result);
                });

                resultsDiv.innerHTML = html;
                loadingDiv.classList.remove('active');
            }, 100);
        }

        // Clear results / æ¸…ç©ºç»“æœ
        function clearResults() {
            document.getElementById('idInput').value = '';
            document.getElementById('results').innerHTML = '';
        }

        // Load examples / åŠ è½½ç¤ºä¾‹
        function loadExamples() {
            const examples = [
                '7559684939684400414',
                '7153549929326120227',
                '7266740902494833931',
                '7559661864628538654',
                '7196618597496524067'
            ];
            document.getElementById('idInput').value = examples.join('\n');
        }

        // Keyboard support / é”®ç›˜æ”¯æŒ
        document.getElementById('idInput').addEventListener('keydown', function(e) {
            if (e.ctrlKey && e.key === 'Enter') {
                decodeIds();
            }
        });

        // Initialize / åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            // Check saved language preference or detect browser language
            const savedLang = localStorage.getItem('preferred-language');
            currentLang = savedLang || detectBrowserLanguage();

            // Update language
            updateLanguage();
            document.documentElement.lang = currentLang;

            console.log('Douyin/TikTok Video ID Decoder loaded');
            console.log('Author: Evil0ctal');
            console.log('GitHub: https://github.com/Evil0ctal/Douyin-TikTok-Video-ID-Decoder');
        });
    </script>
</body>
</html>
