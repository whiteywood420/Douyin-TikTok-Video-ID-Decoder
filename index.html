<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="æŠ–éŸ³/TikTok è§†é¢‘IDåœ¨çº¿è§£æå·¥å…· - Douyin/TikTok Video ID Decoder">
    <meta name="keywords" content="æŠ–éŸ³,TikTok,è§†é¢‘ID,è§£æ,Decoder,aweme_id">
    <meta name="author" content="Evil0ctal">
    <title>æŠ–éŸ³/TikTok è§†é¢‘IDè§£æå™¨ | Douyin/TikTok Video ID Decoder</title>

    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary-color: #2563eb;
            --secondary-color: #7c3aed;
            --success-color: #10b981;
            --danger-color: #ef4444;
            --bg-primary: #ffffff;
            --bg-secondary: #f8fafc;
            --text-primary: #1e293b;
            --text-secondary: #64748b;
            --border-color: #e2e8f0;
            --shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
            --shadow-lg: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
        }

        @media (prefers-color-scheme: dark) {
            :root {
                --bg-primary: #0f172a;
                --bg-secondary: #1e293b;
                --text-primary: #f1f5f9;
                --text-secondary: #94a3b8;
                --border-color: #334155;
            }
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'PingFang SC', 'Microsoft YaHei', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 2rem 1rem;
            color: var(--text-primary);
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        .header {
            text-align: center;
            margin-bottom: 3rem;
            color: white;
        }

        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 0.5rem;
            font-weight: 700;
        }

        .header p {
            font-size: 1.1rem;
            opacity: 0.9;
        }

        .header .subtitle {
            margin-top: 0.5rem;
            font-size: 0.9rem;
            opacity: 0.8;
        }

        .main-card {
            background: var(--bg-primary);
            border-radius: 1rem;
            padding: 2rem;
            box-shadow: var(--shadow-lg);
            margin-bottom: 2rem;
        }

        .input-group {
            margin-bottom: 1.5rem;
        }

        .input-group label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 600;
            color: var(--text-primary);
        }

        .input-group textarea {
            width: 100%;
            padding: 0.75rem;
            border: 2px solid var(--border-color);
            border-radius: 0.5rem;
            font-size: 1rem;
            font-family: 'Monaco', 'Menlo', 'Courier New', monospace;
            background: var(--bg-secondary);
            color: var(--text-primary);
            resize: vertical;
            transition: border-color 0.3s;
        }

        .input-group textarea:focus {
            outline: none;
            border-color: var(--primary-color);
        }

        .button-group {
            display: flex;
            gap: 1rem;
            flex-wrap: wrap;
        }

        .btn {
            padding: 0.75rem 1.5rem;
            border: none;
            border-radius: 0.5rem;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
        }

        .btn-primary {
            background: var(--primary-color);
            color: white;
        }

        .btn-primary:hover {
            background: #1d4ed8;
            transform: translateY(-2px);
            box-shadow: var(--shadow);
        }

        .btn-secondary {
            background: var(--bg-secondary);
            color: var(--text-primary);
            border: 2px solid var(--border-color);
        }

        .btn-secondary:hover {
            background: var(--border-color);
        }

        .results {
            margin-top: 2rem;
        }

        .result-item {
            background: var(--bg-secondary);
            border-radius: 0.5rem;
            padding: 1.5rem;
            margin-bottom: 1rem;
            border-left: 4px solid var(--primary-color);
        }

        .result-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
            padding-bottom: 0.5rem;
            border-bottom: 2px solid var(--border-color);
        }

        .result-id {
            font-family: 'Monaco', 'Menlo', 'Courier New', monospace;
            font-size: 1.1rem;
            font-weight: 700;
            color: var(--primary-color);
        }

        .result-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1rem;
        }

        .result-field {
            padding: 0.75rem;
            background: var(--bg-primary);
            border-radius: 0.375rem;
        }

        .result-field-label {
            font-size: 0.85rem;
            color: var(--text-secondary);
            margin-bottom: 0.25rem;
            font-weight: 600;
        }

        .result-field-value {
            font-family: 'Monaco', 'Menlo', 'Courier New', monospace;
            font-size: 0.95rem;
            color: var(--text-primary);
            word-break: break-all;
        }

        .bit-structure {
            margin-top: 1rem;
            padding: 1rem;
            background: var(--bg-primary);
            border-radius: 0.375rem;
            overflow-x: auto;
        }

        .bit-row {
            font-family: 'Monaco', 'Menlo', 'Courier New', monospace;
            font-size: 0.85rem;
            margin: 0.25rem 0;
            white-space: nowrap;
        }

        .bit-label {
            color: var(--text-secondary);
            font-weight: 600;
        }

        .high-bits {
            color: var(--primary-color);
        }

        .low-bits {
            color: var(--secondary-color);
        }

        .info-section {
            background: var(--bg-primary);
            border-radius: 1rem;
            padding: 2rem;
            box-shadow: var(--shadow-lg);
            margin-bottom: 2rem;
        }

        .info-section h2 {
            margin-bottom: 1rem;
            color: var(--primary-color);
        }

        .info-section ul {
            list-style: none;
            padding-left: 0;
        }

        .info-section li {
            padding: 0.5rem 0;
            padding-left: 1.5rem;
            position: relative;
        }

        .info-section li:before {
            content: "â–¹";
            position: absolute;
            left: 0;
            color: var(--primary-color);
            font-weight: bold;
        }

        .footer {
            text-align: center;
            color: white;
            padding: 2rem 0;
            opacity: 0.9;
        }

        .footer a {
            color: white;
            text-decoration: none;
            font-weight: 600;
        }

        .footer a:hover {
            text-decoration: underline;
        }

        .badge {
            display: inline-block;
            padding: 0.25rem 0.75rem;
            border-radius: 9999px;
            font-size: 0.85rem;
            font-weight: 600;
        }

        .badge-success {
            background: #dcfce7;
            color: #166534;
        }

        .badge-info {
            background: #dbeafe;
            color: #1e40af;
        }

        .example-ids {
            margin-top: 0.5rem;
            padding: 0.75rem;
            background: var(--bg-secondary);
            border-radius: 0.375rem;
            font-size: 0.9rem;
        }

        .example-ids strong {
            display: block;
            margin-bottom: 0.5rem;
            color: var(--text-primary);
        }

        .example-ids code {
            display: block;
            font-family: 'Monaco', 'Menlo', 'Courier New', monospace;
            color: var(--text-secondary);
            margin: 0.25rem 0;
        }

        @media (max-width: 768px) {
            .header h1 {
                font-size: 1.75rem;
            }

            .main-card {
                padding: 1.5rem;
            }

            .result-grid {
                grid-template-columns: 1fr;
            }

            .button-group {
                flex-direction: column;
            }

            .btn {
                width: 100%;
                justify-content: center;
            }
        }

        .loading {
            display: none;
            text-align: center;
            padding: 2rem;
            color: var(--text-secondary);
        }

        .loading.active {
            display: block;
        }

        .error-message {
            background: #fef2f2;
            color: #991b1b;
            padding: 1rem;
            border-radius: 0.5rem;
            margin-bottom: 1rem;
            border-left: 4px solid var(--danger-color);
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <div class="header">
            <h1>ğŸ¬ æŠ–éŸ³/TikTok è§†é¢‘IDè§£æå™¨</h1>
            <p>Douyin/TikTok Video ID Decoder</p>
            <p class="subtitle">åŸºäº Snowflake é£æ ¼ç®—æ³• | Powered by Snowflake-style Algorithm</p>
        </div>

        <!-- Main Input Card -->
        <div class="main-card">
            <div class="input-group">
                <label for="idInput">
                    è§†é¢‘IDè¾“å…¥ | Video ID Input
                    <span class="badge badge-info">æ”¯æŒæ‰¹é‡ | Batch Supported</span>
                </label>
                <textarea
                    id="idInput"
                    rows="5"
                    placeholder="è¾“å…¥ä¸€ä¸ªæˆ–å¤šä¸ªè§†é¢‘IDï¼Œæ¯è¡Œä¸€ä¸ª | Enter one or more video IDs, one per line&#10;&#10;ç¤ºä¾‹ | Example:&#10;7559684939684400414&#10;7153549929326120227&#10;7266740902494833931"
                ></textarea>

                <div class="example-ids">
                    <strong>ç¤ºä¾‹æ•°æ® | Example IDs:</strong>
                    <code>æŠ–éŸ³ | Douyin: 7153549929326120227</code>
                    <code>TikTok: 7559684939684400414</code>
                </div>
            </div>

            <div class="button-group">
                <button class="btn btn-primary" onclick="decodeIds()">
                    ğŸ” è§£æ | Decode
                </button>
                <button class="btn btn-secondary" onclick="clearResults()">
                    ğŸ—‘ï¸ æ¸…ç©º | Clear
                </button>
                <button class="btn btn-secondary" onclick="loadExamples()">
                    ğŸ“ åŠ è½½ç¤ºä¾‹ | Load Examples
                </button>
            </div>

            <div class="loading" id="loading">
                <p>è§£æä¸­... | Decoding...</p>
            </div>

            <div id="results" class="results"></div>
        </div>

        <!-- Info Section -->
        <div class="info-section">
            <h2>ğŸ“– ä½¿ç”¨è¯´æ˜ | Instructions</h2>
            <ul>
                <li><strong>IDç»“æ„:</strong> 64ä½æ— ç¬¦å·æ•´æ•°ï¼Œé«˜32ä½ä¸ºUnixæ—¶é—´æˆ³ï¼ˆç§’çº§ï¼‰ï¼Œä½32ä½ä¸ºå”¯ä¸€æ€§æ ‡è¯†</li>
                <li><strong>ID Structure:</strong> 64-bit unsigned integer, high 32 bits = Unix timestamp (seconds), low 32 bits = uniqueness bits</li>
                <li><strong>å‡†ç¡®æ€§:</strong> è§£ç æ—¶é—´ä¸å®é™…å‘å¸ƒæ—¶é—´å¯èƒ½æœ‰5-30ç§’è¯¯å·®ï¼ˆå±äºæ­£å¸¸èŒƒå›´ï¼‰</li>
                <li><strong>Accuracy:</strong> Decoded time may differ from actual publish time by 5-30 seconds (normal range)</li>
                <li><strong>åº”ç”¨åœºæ™¯:</strong> æ—¶é—´èŒƒå›´æŸ¥è¯¢ã€æ—¶åºåˆ†æã€æ•°æ®åˆ†ç‰‡ã€æ‰¹æ¬¡è¯†åˆ«</li>
                <li><strong>Use Cases:</strong> Time range queries, time series analysis, data sharding, batch identification</li>
            </ul>
        </div>

        <div class="info-section">
            <h2>ğŸ”§ æŠ€æœ¯ç»†èŠ‚ | Technical Details</h2>
            <ul>
                <li><strong>é«˜32ä½ | High 32 bits:</strong> Unixæ—¶é—´æˆ³ï¼ˆç§’çº§ï¼‰| Unix timestamp (second-level)</li>
                <li><strong>ä½32ä½ | Low 32 bits:</strong> å”¯ä¸€æ€§ä½ï¼ˆåˆ†ç‰‡ID + åºåˆ—å·ï¼‰| Uniqueness bits (Shard ID + Sequence)</li>
                <li><strong>ç®—æ³•éªŒè¯:</strong> å·²ä½¿ç”¨73æ¡çœŸå®æ•°æ®éªŒè¯ï¼Œå¹³å‡è¯¯å·®14.3ç§’</li>
                <li><strong>Algorithm Validation:</strong> Validated with 73 real samples, average error 14.3 seconds</li>
                <li><strong>é¡¹ç›®åœ°å€:</strong> <a href="https://github.com/Evil0ctal/Douyin-TikTok-Video-ID-Decoder" target="_blank">GitHub Repository</a></li>
            </ul>
        </div>

        <!-- Footer -->
        <div class="footer">
            <p>Made with â¤ï¸ by <a href="https://github.com/evil0ctal" target="_blank">Evil0ctal</a></p>
            <p style="margin-top: 0.5rem; font-size: 0.9rem;">
                <a href="https://github.com/Evil0ctal/Douyin-TikTok-Video-ID-Decoder" target="_blank">â­ GitHub</a> |
                <a href="https://github.com/Evil0ctal/Douyin-TikTok-Video-ID-Decoder/blob/main/README.md" target="_blank">ğŸ“– æ–‡æ¡£</a>
            </p>
        </div>
    </div>

    <script>
        // æ ¸å¿ƒè§£ç å‡½æ•° | Core decode function
        function decodeAwemeId(idStr) {
            try {
                // å°†å­—ç¬¦ä¸²è½¬æ¢ä¸ºBigIntï¼ˆæ”¯æŒ64ä½æ•´æ•°ï¼‰| Convert string to BigInt (supports 64-bit integers)
                const n = BigInt(idStr);

                // æå–é«˜32ä½ï¼ˆæ—¶é—´æˆ³ï¼‰| Extract high 32 bits (timestamp)
                const tsSec = Number(n >> 32n);

                // æå–ä½32ä½ï¼ˆå”¯ä¸€æ€§ä½ï¼‰| Extract low 32 bits (uniqueness bits)
                const low32 = Number(n & 0xFFFFFFFFn);

                // è½¬æ¢ä¸ºæ—¥æœŸæ—¶é—´ | Convert to datetime
                const dtUtc = new Date(tsSec * 1000);

                // è½¬æ¢ä¸ºæœ¬åœ°æ—¶é—´ | Convert to local time
                const dtLocal = dtUtc.toLocaleString('zh-CN', { timeZone: Intl.DateTimeFormat().resolvedOptions().timeZone });

                // åˆ†æä½32ä½ç»“æ„ï¼ˆ16+16åˆ’åˆ†ï¼‰| Analyze low 32-bit structure (16+16 division)
                const shardId = (low32 >> 16) & 0xFFFF;
                const sequence = low32 & 0xFFFF;

                // 64ä½äºŒè¿›åˆ¶è¡¨ç¤º | 64-bit binary representation
                const bin64 = n.toString(2).padStart(64, '0');
                const high32Bin = bin64.substring(0, 32);
                const low32Bin = bin64.substring(32);

                return {
                    success: true,
                    id: idStr,
                    timestampSec: tsSec,
                    datetimeUtc: dtUtc.toISOString(),
                    datetimeLocal: dtLocal,
                    low32Dec: low32,
                    low32Hex: '0x' + low32.toString(16).toUpperCase(),
                    low32Bin: '0b' + low32.toString(2).padStart(32, '0'),
                    shardId: shardId,
                    shardIdHex: '0x' + shardId.toString(16).toUpperCase(),
                    sequence: sequence,
                    sequenceHex: '0x' + sequence.toString(16).toUpperCase(),
                    high32Bin: high32Bin,
                    low32BinFull: low32Bin
                };
            } catch (error) {
                return {
                    success: false,
                    id: idStr,
                    error: error.message
                };
            }
        }

        // æ ¼å¼åŒ–äºŒè¿›åˆ¶æ˜¾ç¤ºï¼ˆæ¯8ä½ä¸€ç»„ï¼‰| Format binary display (groups of 8 bits)
        function formatBinary(binStr) {
            let result = '';
            for (let i = 0; i < binStr.length; i += 8) {
                result += binStr.substring(i, i + 8) + ' ';
            }
            return result.trim();
        }

        // åˆ›å»ºç»“æœHTML | Create result HTML
        function createResultHtml(result) {
            if (!result.success) {
                return `
                    <div class="error-message">
                        <strong>é”™è¯¯ | Error:</strong> æ— æ³•è§£æID "${result.id}"<br>
                        ${result.error}
                    </div>
                `;
            }

            return `
                <div class="result-item">
                    <div class="result-header">
                        <div class="result-id">${result.id}</div>
                        <span class="badge badge-success">âœ“ è§£ææˆåŠŸ | Decoded</span>
                    </div>

                    <div class="result-grid">
                        <div class="result-field">
                            <div class="result-field-label">â° UTCæ—¶é—´ | UTC Time</div>
                            <div class="result-field-value">${result.datetimeUtc}</div>
                        </div>
                        <div class="result-field">
                            <div class="result-field-label">ğŸŒ æœ¬åœ°æ—¶é—´ | Local Time</div>
                            <div class="result-field-value">${result.datetimeLocal}</div>
                        </div>
                        <div class="result-field">
                            <div class="result-field-label">ğŸ“… æ—¶é—´æˆ³ | Timestamp (ç§’)</div>
                            <div class="result-field-value">${result.timestampSec}</div>
                        </div>
                        <div class="result-field">
                            <div class="result-field-label">ğŸ”¢ åˆ†ç‰‡ID | Shard ID</div>
                            <div class="result-field-value">${result.shardId} (${result.shardIdHex})</div>
                        </div>
                        <div class="result-field">
                            <div class="result-field-label">ğŸ“Š åºåˆ—å· | Sequence</div>
                            <div class="result-field-value">${result.sequence} (${result.sequenceHex})</div>
                        </div>
                        <div class="result-field">
                            <div class="result-field-label">ğŸ’¾ ä½32ä½ | Low 32 bits</div>
                            <div class="result-field-value">${result.low32Dec} (${result.low32Hex})</div>
                        </div>
                    </div>

                    <div class="bit-structure">
                        <div class="bit-row">
                            <span class="bit-label">64ä½ç»“æ„ | 64-bit Structure:</span>
                        </div>
                        <div class="bit-row">
                            <span class="bit-label">é«˜32ä½ | High:</span> <span class="high-bits">${formatBinary(result.high32Bin)}</span>
                        </div>
                        <div class="bit-row">
                            <span class="bit-label">ä½32ä½ | Low: </span> <span class="low-bits">${formatBinary(result.low32BinFull)}</span>
                        </div>
                        <div class="bit-row">
                            <span class="bit-label">è§£è¯» | Info:</span>
                            <span class="high-bits">æ—¶é—´æˆ³(Timestamp)</span> +
                            <span class="low-bits">åˆ†ç‰‡(Shard)+åºåˆ—(Seq)</span>
                        </div>
                    </div>
                </div>
            `;
        }

        // è§£æID | Decode IDs
        function decodeIds() {
            const input = document.getElementById('idInput').value.trim();
            const resultsDiv = document.getElementById('results');
            const loadingDiv = document.getElementById('loading');

            if (!input) {
                resultsDiv.innerHTML = `
                    <div class="error-message">
                        è¯·è¾“å…¥è‡³å°‘ä¸€ä¸ªè§†é¢‘ID | Please enter at least one video ID
                    </div>
                `;
                return;
            }

            // æ˜¾ç¤ºåŠ è½½çŠ¶æ€ | Show loading state
            loadingDiv.classList.add('active');
            resultsDiv.innerHTML = '';

            // å»¶è¿Ÿå¤„ç†ä»¥æ˜¾ç¤ºåŠ è½½åŠ¨ç”» | Delay processing to show loading animation
            setTimeout(() => {
                const ids = input.split('\n')
                    .map(id => id.trim())
                    .filter(id => id.length > 0);

                let html = '';

                ids.forEach(id => {
                    const result = decodeAwemeId(id);
                    html += createResultHtml(result);
                });

                resultsDiv.innerHTML = html;
                loadingDiv.classList.remove('active');
            }, 100);
        }

        // æ¸…ç©ºç»“æœ | Clear results
        function clearResults() {
            document.getElementById('idInput').value = '';
            document.getElementById('results').innerHTML = '';
        }

        // åŠ è½½ç¤ºä¾‹æ•°æ® | Load example data
        function loadExamples() {
            const examples = [
                '7559684939684400414',
                '7153549929326120227',
                '7266740902494833931',
                '7559661864628538654',
                '7196618597496524067'
            ];
            document.getElementById('idInput').value = examples.join('\n');
        }

        // æ”¯æŒå›è½¦é”®è§£æ | Support Enter key to decode
        document.getElementById('idInput').addEventListener('keydown', function(e) {
            if (e.ctrlKey && e.key === 'Enter') {
                decodeIds();
            }
        });

        // é¡µé¢åŠ è½½å®Œæˆåçš„åˆå§‹åŒ– | Initialize after page load
        document.addEventListener('DOMContentLoaded', function() {
            console.log('æŠ–éŸ³/TikTok è§†é¢‘IDè§£æå™¨å·²åŠ è½½ | Douyin/TikTok Video ID Decoder loaded');
            console.log('ä½œè€… | Author: Evil0ctal');
            console.log('GitHub: https://github.com/Evil0ctal/Douyin-TikTok-Video-ID-Decoder');
        });
    </script>
</body>
</html>
